### This file was generated by Nexus Schema
### Do not make changes to this file directly

type AccessActivatedEvent implements PetitionEvent {
  access: PetitionAccess!
  createdAt: DateTime!
  id: GID!
  user: User
}

type AccessDeactivatedEvent implements PetitionEvent {
  access: PetitionAccess!
  createdAt: DateTime!
  id: GID!
  user: User
}

type AccessOpenedEvent implements PetitionEvent {
  access: PetitionAccess!
  createdAt: DateTime!
  id: GID!
}

enum ChangePasswordResult {
  INCORRECT_PASSWORD
  INVALID_NEW_PASSWORD
  SUCCESS
}

type CommentDeletedEvent implements PetitionEvent {
  createdAt: DateTime!
  deletedBy: UserOrPetitionAccess
  field: PetitionField
  id: GID!
}

type CommentPublishedEvent implements PetitionEvent {
  comment: PetitionFieldComment
  createdAt: DateTime!
  field: PetitionField
  id: GID!
}

"""
A contact in the system.
"""
type Contact implements Timestamps {
  """
  The petition accesses for this contact
  """
  accesses(
    """
    Number of elements to take from the list.
    """
    limit: Int

    """
    Number of elements to skip from the list.
    """
    offset: Int
  ): PetitionAccessPagination!

  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  The email of the contact.
  """
  email: String!

  """
  The first name of the contact.
  """
  firstName: String

  """
  The full name of the contact.
  """
  fullName: String

  """
  The ID of the contact.
  """
  id: GID!

  """
  The last name of the contact.
  """
  lastName: String

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!
}

type ContactPagination {
  """
  The requested slice of items.
  """
  items: [Contact!]!

  """
  The total count of items in the list.
  """
  totalCount: Int!
}

input CreateContactInput {
  email: String!
  firstName: String
  lastName: String
}

interface CreatedAt {
  """
  Time when the resource was created.
  """
  createdAt: DateTime!
}

type CreateFileUploadReply {
  """
  Endpoint where to upload the file.
  """
  endpoint: String!
  reply: PublicPetitionFieldReply!
}

input CreateFileUploadReplyInput {
  contentType: String!
  filename: String!
  size: Int!
}

input CreateTextReplyInput {
  text: String!
}

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar DateTime

enum EntityType {
  Contact
  Organization
  Petition
  User
}

type FileUploadReplyDownloadLinkResult {
  result: Result!
  url: String
}

scalar GID

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON
@specifiedBy(
  url: "http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf"
)

"""
The `JSONObject` scalar type represents JSON objects as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSONObject
@specifiedBy(
  url: "http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf"
)

type MessageCancelledEvent implements PetitionEvent {
  createdAt: DateTime!
  id: GID!
  message: PetitionMessage!
  user: User
}

type MessageScheduledEvent implements PetitionEvent {
  createdAt: DateTime!
  id: GID!
  message: PetitionMessage!
}

type MessageSentEvent implements PetitionEvent {
  createdAt: DateTime!
  id: GID!
  message: PetitionMessage!
}

type Mutation {
  """
  Adds permissions on given petitions and users
  """
  addPetitionUserPermission(
    message: String

    """
    Wether to notify the user via email or not.
    """
    notify: Boolean = false
    permissionType: PetitionUserPermissionTypeRW!
    petitionIds: [GID!]!
    userIds: [GID!]!
  ): [Petition!]!

  """
  Clones the petition and assigns the given user as owner and creator.
  """
  assignPetitionToUser(
    """
    Global ID of the petition
    """
    petitionId: ID!

    """
    ID of the user
    """
    userId: Int!
  ): SupportMethodResponse!

  """
  Cancels a scheduled petition message.
  """
  cancelScheduledMessage(messageId: GID!, petitionId: GID!): PetitionMessage

  """
  Changes the password for the current logged in user.
  """
  changePassword(newPassword: String!, password: String!): ChangePasswordResult!

  """
  Changes the type of a petition Field
  """
  changePetitionFieldType(
    fieldId: GID!
    force: Boolean = false
    petitionId: GID!
    type: PetitionFieldType!
  ): PetitionBaseAndField!

  """
  Clones a petition field
  """
  clonePetitionField(fieldId: GID!, petitionId: GID!): PetitionBaseAndField!

  """
  Clone petition.
  """
  clonePetitions(petitionIds: [GID!]!): [PetitionBase!]!

  """
  Create a contact.
  """
  createContact(data: CreateContactInput!): Contact!

  """
  Creates a new organization.
  """
  createOrganization(
    """
    Identifier of the organization
    """
    identifier: String!

    """
    Name of the organization
    """
    name: String!
    status: OrganizationStatus!
  ): SupportMethodResponse!

  """
  Create petition.
  """
  createPetition(
    locale: PetitionLocale!
    name: String

    """
    GID of petition to base from
    """
    petitionId: GID

    """
    Type of petition to create
    """
    type: PetitionBaseType = PETITION
  ): PetitionBase!

  """
  Creates a petition field
  """
  createPetitionField(
    petitionId: GID!
    position: Int
    type: PetitionFieldType!
  ): PetitionBaseAndField!

  """
  Create a petition field comment.
  """
  createPetitionFieldComment(
    content: String!
    petitionFieldId: GID!
    petitionFieldReplyId: GID
    petitionId: GID!
  ): PetitionFieldComment!

  """
  Creates a new user in the specified organization.
  """
  createUser(
    """
    Email of the user
    """
    email: String!

    """
    First name of the user
    """
    firstName: String!

    """
    Last name of the user
    """
    lastName: String!

    """
    ID of the organization
    """
    organizationId: Int!

    """
    Role of the user
    """
    organizationRole: OrganizationRole!
  ): SupportMethodResponse!

  """
  Deactivates the specified active petition accesses.
  """
  deactivateAccesses(accessIds: [GID!]!, petitionId: GID!): [PetitionAccess!]!

  """
  Delete contacts.
  """
  deleteContacts(ids: [GID!]!): Result!

  """
  Soft-deletes any given petition on the database.
  """
  deletePetition(
    """
    Global ID of the petition
    """
    petitionId: ID!
  ): SupportMethodResponse!

  """
  Deletes a petition field.
  """
  deletePetitionField(
    fieldId: GID!
    force: Boolean = false
    petitionId: GID!
  ): PetitionBase!

  """
  Delete a petition field comment.
  """
  deletePetitionFieldComment(
    petitionFieldCommentId: GID!
    petitionFieldId: GID!
    petitionId: GID!
  ): Result!

  """
  Delete petitions.
  """
  deletePetitions(force: Boolean = false, ids: [GID!]!): Result!

  """
  Edits permissions on given petitions and users
  """
  editPetitionUserPermission(
    permissionType: PetitionUserPermissionType!
    petitionIds: [GID!]!
    userIds: [GID!]!
  ): [Petition!]!

  """
  Generates a download link for a file reply.
  """
  fileUploadReplyDownloadLink(
    petitionId: GID!

    """
    If true will use content-disposition inline instead of attachment
    """
    preview: Boolean
    replyId: GID!
  ): FileUploadReplyDownloadLinkResult!

  """
  Marks the specified comments as read.
  """
  markPetitionFieldCommentsAsRead(
    petitionFieldCommentIds: [GID!]!
    petitionId: GID!
  ): [PetitionFieldComment!]!

  """
  Marks a filled petition as ready for review.
  """
  publicCompletePetition(keycode: ID!): PublicPetition!

  """
  Creates a reply to a file upload field.
  """
  publicCreateFileUploadReply(
    data: CreateFileUploadReplyInput!
    fieldId: GID!
    keycode: ID!
  ): CreateFileUploadReply!

  """
  Create a petition field comment.
  """
  publicCreatePetitionFieldComment(
    content: String!
    keycode: ID!
    petitionFieldId: GID!
  ): PublicPetitionFieldComment!

  """
  Creates a reply to a text field.
  """
  publicCreateTextReply(
    data: CreateTextReplyInput!
    fieldId: GID!
    keycode: ID!
  ): PublicPetitionFieldReply!

  """
  Delete a petition field comment.
  """
  publicDeletePetitionFieldComment(
    keycode: ID!
    petitionFieldCommentId: GID!
    petitionFieldId: GID!
  ): Result!

  """
  Deletes a reply to a petition field.
  """
  publicDeletePetitionReply(keycode: ID!, replyId: GID!): Result!

  """
  Notifies the backend that the upload is complete.
  """
  publicFileUploadReplyComplete(
    keycode: ID!
    replyId: GID!
  ): PublicPetitionFieldReply!

  """
  Marks the specified comments as read.
  """
  publicMarkPetitionFieldCommentsAsRead(
    keycode: ID!
    petitionFieldCommentIds: [GID!]!
  ): [PublicPetitionFieldComment!]!

  """
  Submits all unpublished comments.
  """
  publicSubmitUnpublishedComments(keycode: ID!): [PublicPetitionFieldComment!]!

  """
  Update a petition field comment.
  """
  publicUpdatePetitionFieldComment(
    content: String!
    keycode: ID!
    petitionFieldCommentId: GID!
    petitionFieldId: GID!
  ): PublicPetitionFieldComment!

  """
  Reactivates the specified inactive petition accesses.
  """
  reactivateAccesses(accessIds: [GID!]!, petitionId: GID!): [PetitionAccess!]!

  """
  Removes permissions on given petitions and users
  """
  removePetitionUserPermission(
    petitionIds: [GID!]!
    userIds: [GID!]!
  ): [Petition!]!

  """
  Sends a petition message to the speicified contacts.
  """
  sendMessages(
    accessIds: [GID!]!
    body: JSON!
    petitionId: GID!
    scheduledAt: DateTime
    subject: String!
  ): Result!

  """
  Sends the petition and creates the corresponding accesses and messages.
  """
  sendPetition(
    body: JSON!
    contactIds: [GID!]!
    petitionId: GID!
    remindersConfig: RemindersConfigInput
    scheduledAt: DateTime
    subject: String!
  ): SendPetitionResult!

  """
  Sends a reminder for the specified petition accesses.
  """
  sendReminders(accessIds: [GID!]!, petitionId: GID!): Result!

  """
  Submits all unpublished comments.
  """
  submitUnpublishedComments(petitionId: GID!): [PetitionFieldComment!]!

  """
  Switches automatic reminders for the specified petition accesses.
  """
  switchAutomaticReminders(
    accessIds: [GID!]!
    petitionId: GID!
    remindersConfig: RemindersConfigInput
    start: Boolean!
  ): [PetitionAccess!]!

  """
  Transfers petition ownership to a given user
  """
  transferPetitionOwnership(petitionIds: [GID!]!, userId: GID!): [Petition!]!

  """
  Updates a contact.
  """
  updateContact(data: UpdateContactInput!, id: GID!): Contact!

  """
  Updates the positions of the petition fields
  """
  updateFieldPositions(fieldIds: [GID!]!, petitionId: GID!): PetitionBase!

  """
  Updates the onboarding status for one of the pages.
  """
  updateOnboardingStatus(key: OnboardingKey!, status: OnboardingStatus!): User!

  """
  Updates a petition.
  """
  updatePetition(data: UpdatePetitionInput!, petitionId: GID!): PetitionBase!

  """
  Updates a petition field.
  """
  updatePetitionField(
    data: UpdatePetitionFieldInput!
    fieldId: GID!
    petitionId: GID!
  ): PetitionBaseAndField!

  """
  Update a petition field comment.
  """
  updatePetitionFieldComment(
    content: String!
    petitionFieldCommentId: GID!
    petitionFieldId: GID!
    petitionId: GID!
  ): PetitionFieldComment!

  """
  Updates the status of a petition field reply and sets the petition as reviewed if all fields are validated.
  """
  updatePetitionFieldRepliesStatus(
    petitionFieldId: GID!
    petitionFieldReplyIds: [GID!]!
    petitionId: GID!
    status: PetitionFieldReplyStatus!
  ): PetitionWithFieldAndReplies!

  """
  Updates the user with the provided data.
  """
  updateUser(data: UpdateUserInput!, id: GID!): User!

  """
  Updates the validation of a field and sets the petition as reviewed if all fields are validated.
  """
  validatePetitionFields(
    fieldIds: [GID!]!
    petitionId: GID!
    value: Boolean!
  ): PetitionAndPartialFields!
}

enum OnboardingKey {
  CONTACT_DETAILS
  CONTACT_LIST
  PETITION_ACTIVITY
  PETITION_COMPOSE
  PETITION_REVIEW
  PETITIONS_LIST
}

enum OnboardingStatus {
  FINISHED
  SKIPPED
}

"""
An organization in the system.
"""
type Organization implements Timestamps {
  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  The ID of the organization.
  """
  id: GID!

  """
  The unique text identifier of the organization.
  """
  identifier: String!

  """
  The name of the organization.
  """
  name: String!

  """
  The status of the organization.
  """
  status: OrganizationStatus!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!

  """
  The users in the organization.
  """
  users(
    exclude: [GID!]

    """
    Number of elements to take from the list.
    """
    limit: Int

    """
    Number of elements to skip from the list.
    """
    offset: Int

    """
    Optional text to search in the collection.
    """
    search: String
  ): UserPagination!
}

"""
The roles of a user within an organization.
"""
enum OrganizationRole {
  ADMIN
  NORMAL
}

"""
The status of the organization.
"""
enum OrganizationStatus {
  """
  Used for regular clients
  """
  ACTIVE

  """
  Used on churned clients
  """
  CHURNED

  """
  Used for demoing the product
  """
  DEMO

  """
  Used for development or testing purposes
  """
  DEV
}

type OwnershipTransferredEvent implements PetitionEvent {
  createdAt: DateTime!
  id: GID!
  owner: User
  user: User
}

"""
A petition
"""
type Petition implements PetitionBase {
  """
  The accesses for this petition
  """
  accesses: [PetitionAccess!]!

  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  The deadline of the petition.
  """
  deadline: DateTime

  """
  The body of the petition.
  """
  emailBody: JSON

  """
  The subject of the petition.
  """
  emailSubject: String

  """
  The events for the petition.
  """
  events(
    """
    Number of elements to take from the list.
    """
    limit: Int

    """
    Number of elements to skip from the list.
    """
    offset: Int
  ): PetitionEventPagination!

  """
  The number of fields in the petition.
  """
  fieldCount: Int!

  """
  The definition of the petition fields.
  """
  fields: [PetitionField!]!

  """
  The ID of the petition or template.
  """
  id: GID!

  """
  The locale of the petition.
  """
  locale: PetitionLocale!

  """
  The name of the petition.
  """
  name: String
  owner: User!

  """
  The progress of the petition.
  """
  progress: PetitionProgress!

  """
  The reminders configuration for the petition.
  """
  remindersConfig: RemindersConfig

  """
  The status of the petition.
  """
  status: PetitionStatus!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!

  """
  The permissions linked to the petition
  """
  userPermissions: [PetitionUserPermission!]!
}

"""
A petition access
"""
type PetitionAccess implements Timestamps {
  """
  The contact of this access.
  """
  contact: Contact

  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  The user who granted the access.
  """
  granter: User

  """
  The ID of the petition access.
  """
  id: GID!

  """
  When the next reminder will be sent.
  """
  nextReminderAt: DateTime

  """
  The petition for this message access.
  """
  petition: Petition

  """
  Number of reminders sent.
  """
  reminderCount: Int!

  """
  Whether automatic reminders are active or not for this petition access
  """
  remindersActive: Boolean!

  """
  The reminder settings of the petition.
  """
  remindersConfig: RemindersConfig

  """
  Number of reminders left.
  """
  remindersLeft: Int!

  """
  The status of the petition access
  """
  status: PetitionAccessStatus!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!
}

type PetitionAccessPagination {
  """
  The requested slice of items.
  """
  items: [PetitionAccess!]!

  """
  The total count of items in the list.
  """
  totalCount: Int!
}

"""
The status of a petition access.
"""
enum PetitionAccessStatus {
  """
  The petition is accessible by the contact.
  """
  ACTIVE

  """
  The petition is not accessible by the contact.
  """
  INACTIVE
}

type PetitionAndField implements PetitionBaseAndField {
  field: PetitionField!
  petition: Petition!
}

"""
The petition and a subset of some of its fields.
"""
type PetitionAndPartialFields {
  fields: [PetitionField!]!
  petition: Petition!
}

interface PetitionBase {
  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  The body of the petition.
  """
  emailBody: JSON

  """
  The subject of the petition.
  """
  emailSubject: String

  """
  The number of fields in the petition.
  """
  fieldCount: Int!

  """
  The definition of the petition fields.
  """
  fields: [PetitionField!]!

  """
  The ID of the petition or template.
  """
  id: GID!

  """
  The locale of the petition.
  """
  locale: PetitionLocale!

  """
  The name of the petition.
  """
  name: String
  owner: User!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!

  """
  The permissions linked to the petition
  """
  userPermissions: [PetitionUserPermission!]!
}

interface PetitionBaseAndField {
  field: PetitionField!
  petition: PetitionBase!
}

type PetitionBasePagination {
  """
  The requested slice of items.
  """
  items: [PetitionBase!]!

  """
  The total count of items in the list.
  """
  totalCount: Int!
}

enum PetitionBaseType {
  PETITION
  TEMPLATE
}

type PetitionCompletedEvent implements PetitionEvent {
  access: PetitionAccess!
  createdAt: DateTime!
  id: GID!
}

type PetitionCreatedEvent implements PetitionEvent {
  createdAt: DateTime!
  id: GID!
  user: User
}

interface PetitionEvent {
  createdAt: DateTime!
  id: GID!
}

type PetitionEventPagination {
  """
  The requested slice of items.
  """
  items: [PetitionEvent!]!

  """
  The total count of items in the list.
  """
  totalCount: Int!
}

"""
A field within a petition.
"""
type PetitionField {
  """
  The comments for this field.
  """
  comments: [PetitionFieldComment!]!

  """
  The description of the petition field.
  """
  description: String

  """
  The ID of the petition field.
  """
  id: GID!

  """
  Determines if the field can be moved or deleted.
  """
  isFixed: Boolean!

  """
  Determines if the field accepts replies
  """
  isReadOnly: Boolean!

  """
  Determines if this field allows multiple replies.
  """
  multiple: Boolean!

  """
  Determines if this field is optional.
  """
  optional: Boolean!

  """
  The options of the petition.
  """
  options: JSONObject
  position: Int!

  """
  The replies to the petition field
  """
  replies: [PetitionFieldReply!]!

  """
  The title of the petition field.
  """
  title: String

  """
  The type of the petition field.
  """
  type: PetitionFieldType!

  """
  Determines if the content of this field has been validated.
  """
  validated: Boolean!
}

"""
A comment on a petition field
"""
type PetitionFieldComment {
  """
  The author of the comment.
  """
  author: UserOrPetitionAccess

  """
  The content of the comment.
  """
  content: String!

  """
  The ID of the petition field comment.
  """
  id: GID!

  """
  Whether the comment has been edited after being published.
  """
  isEdited: Boolean!

  """
  Whether the comment has been read or not.
  """
  isUnread: Boolean!

  """
  Time when the comment was published.
  """
  publishedAt: DateTime

  """
  The reply the comment is refering to.
  """
  reply: PetitionFieldReply
}

"""
A reply to a petition field
"""
type PetitionFieldReply implements Timestamps {
  """
  The access from where this reply was made.
  """
  access: PetitionAccess!

  """
  The content of the reply.
  """
  content: JSONObject!

  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  The petition field for this reply.
  """
  field: PetitionField

  """
  The ID of the petition field reply.
  """
  id: GID!

  """
  The status of the reply.
  """
  status: PetitionFieldReplyStatus!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!
}

"""
The status of a petition.
"""
enum PetitionFieldReplyStatus {
  """
  The reply has been approved.
  """
  APPROVED

  """
  The reply has not been approved or rejected.
  """
  PENDING

  """
  The reply has been rejected.
  """
  REJECTED
}

"""
Type of a petition field
"""
enum PetitionFieldType {
  """
  A file upload field.
  """
  FILE_UPLOAD

  """
  A heading field.
  """
  HEADING

  """
  A text field.
  """
  TEXT
}

"""
The locale used for rendering the petition to the contact.
"""
enum PetitionLocale {
  en
  es
}

"""
A petition message
"""
type PetitionMessage implements CreatedAt {
  """
  The access of this petition message.
  """
  access: PetitionAccess!

  """
  Tells when the email bounced.
  """
  bouncedAt: DateTime

  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  Tells when the email was delivered.
  """
  deliveredAt: DateTime

  """
  The body of the petition message.
  """
  emailBody: JSON

  """
  The subject of the petition message.
  """
  emailSubject: JSON

  """
  The ID of the petition message.
  """
  id: GID!

  """
  Tells when the email was opened for the first time.
  """
  openedAt: DateTime

  """
  Time at which the message will be sent.
  """
  scheduledAt: DateTime

  """
  The sender of this petition message.
  """
  sender: User!

  """
  If already sent, the date at which the email was sent.
  """
  sentAt: DateTime

  """
  The status of the petition message
  """
  status: PetitionMessageStatus!
}

"""
The status of a petition message.
"""
enum PetitionMessageStatus {
  """
  The message was scheduled but has been cancelled.
  """
  CANCELLED

  """
  The message has been processed.
  """
  PROCESSED

  """
  The message is being processed.
  """
  PROCESSING

  """
  The message has been scheduled to be sent at a specific time.
  """
  SCHEDULED
}

"""
The progress of a petition.
"""
type PetitionProgress {
  """
  Number of optional fields not replied or validated
  """
  optional: Int!

  """
  Number of fields with a reply and not validated
  """
  replied: Int!

  """
  Total number of fields in the petition
  """
  total: Int!

  """
  Number of fields validated
  """
  validated: Int!
}

type PetitionReminder implements CreatedAt {
  """
  The access of this petition message.
  """
  access: PetitionAccess!

  """
  Time when the resource was created.
  """
  createdAt: DateTime!
  id: GID!

  """
  The sender of this petition message.
  """
  sender: User

  """
  The type of the reminder.
  """
  type: PetitionReminderType!
}

"""
The type of a petition reminder.
"""
enum PetitionReminderType {
  """
  The reminder has been sent by the system according to the reminders configuration.
  """
  AUTOMATIC

  """
  The reminder has been sent manually by a user.
  """
  MANUAL
}

type PetitionReviewedEvent implements PetitionEvent {
  createdAt: DateTime!
  id: GID!
  user: User
}

"""
The status of a petition.
"""
enum PetitionStatus {
  """
  The petition has been completed.
  """
  COMPLETED

  """
  The petition has not been sent yet.
  """
  DRAFT

  """
  The petition has been sent and is awaiting completion.
  """
  PENDING

  """
  The petition has been reviewed by a user.
  """
  REVIEWED
}

"""
A petition template
"""
type PetitionTemplate implements PetitionBase {
  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  Description of the template.
  """
  description: String

  """
  The body of the petition.
  """
  emailBody: JSON

  """
  The subject of the petition.
  """
  emailSubject: String

  """
  The number of fields in the petition.
  """
  fieldCount: Int!

  """
  The definition of the petition fields.
  """
  fields: [PetitionField!]!

  """
  The ID of the petition or template.
  """
  id: GID!

  """
  Whether the template is publicly available or not
  """
  isPublic: Boolean!

  """
  The locale of the petition.
  """
  locale: PetitionLocale!

  """
  The name of the petition.
  """
  name: String
  owner: User!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!

  """
  The permissions linked to the petition
  """
  userPermissions: [PetitionUserPermission!]!
}

type PetitionTemplateAndField implements PetitionBaseAndField {
  field: PetitionField!
  petition: PetitionTemplate!
}

type PetitionTemplatePagination {
  """
  The requested slice of items.
  """
  items: [PetitionTemplate!]!

  """
  The total count of items in the list.
  """
  totalCount: Int!
}

"""
The permission for a petition and user
"""
type PetitionUserPermission implements Timestamps {
  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  wether user is subscribed or not to emails and alerts of the petition
  """
  isSubscribed: Boolean!

  """
  The type of the permission.
  """
  permissionType: PetitionUserPermissionType!

  """
  The petition linked to the permission.
  """
  petition: Petition!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!

  """
  The user linked to the permission
  """
  user: User!
}

"""
The type of permission for a petition user.
"""
enum PetitionUserPermissionType {
  OWNER
  READ
  WRITE
}

"""
The READ and WRITE permissions for a petition user.
"""
enum PetitionUserPermissionTypeRW {
  READ
  WRITE
}

type PetitionWithFieldAndReplies {
  field: PetitionField!
  petition: Petition!
  replies: [PetitionFieldReply!]!
}

"""
A public view of a contact
"""
type PublicContact {
  """
  The email of the user.
  """
  email: String!

  """
  The first name of the user.
  """
  firstName: String

  """
  The full name of the user.
  """
  fullName: String

  """
  The ID of the contact.
  """
  id: GID!

  """
  The last name of the user.
  """
  lastName: String
}

"""
A public view of an organization
"""
type PublicOrganization {
  """
  The ID of the organization.
  """
  id: GID!

  """
  The identifier of the organization.
  """
  identifier: String!

  """
  The logo of the organization.
  """
  logoUrl: String

  """
  The name of the organization.
  """
  name: String!
}

"""
A public view of the petition
"""
type PublicPetition implements Timestamps {
  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  The deadline of the petition.
  """
  deadline: DateTime

  """
  The field definition of the petition.
  """
  fields: [PublicPetitionField!]!

  """
  The ID of the petition.
  """
  id: GID!

  """
  The locale of the petition.
  """
  locale: PetitionLocale!

  """
  The status of the petition.
  """
  status: PetitionStatus!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!
}

"""
A public view of a petition access
"""
type PublicPetitionAccess {
  contact: PublicContact
  granter: PublicUser
  petition: PublicPetition
}

"""
A field within a petition.
"""
type PublicPetitionField {
  """
  The comments for this field.
  """
  comments: [PublicPetitionFieldComment!]!

  """
  The description of the petition field.
  """
  description: String

  """
  The ID of the petition field.
  """
  id: GID!

  """
  Determines if the field accepts replies
  """
  isReadOnly: Boolean!

  """
  Determines if this field allows multiple replies.
  """
  multiple: Boolean!

  """
  Determines if this field is optional.
  """
  optional: Boolean!

  """
  The options of the petition.
  """
  options: JSONObject

  """
  The replies to the petition field
  """
  replies: [PublicPetitionFieldReply!]!

  """
  The title of the petition field.
  """
  title: String

  """
  The type of the petition field.
  """
  type: PetitionFieldType!

  """
  Determines if the content of this field has been validated.
  """
  validated: Boolean!
}

"""
A comment on a petition field
"""
type PublicPetitionFieldComment {
  """
  The author of the comment.
  """
  author: PublicUserOrContact

  """
  The content of the comment.
  """
  content: String!

  """
  The ID of the petition field comment.
  """
  id: GID!

  """
  Whether the comment has been read or not.
  """
  isUnread: Boolean!

  """
  Time when the comment was published.
  """
  publishedAt: DateTime

  """
  The reply the comment is refering to.
  """
  reply: PublicPetitionFieldReply
}

"""
A reply to a petition field
"""
type PublicPetitionFieldReply implements Timestamps {
  """
  The public content of the reply
  """
  content: JSONObject!

  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  The ID of the petition field reply.
  """
  id: GID!

  """
  The status of the petition field reply.
  """
  status: PetitionFieldReplyStatus!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!
}

"""
A public view of a user
"""
type PublicUser {
  """
  The email of the user.
  """
  email: String!

  """
  The first name of the user.
  """
  firstName: String

  """
  The full name of the user.
  """
  fullName: String

  """
  The ID of the user.
  """
  id: GID!

  """
  The last name of the user.
  """
  lastName: String

  """
  The organization of the user.
  """
  organization: PublicOrganization!
}

union PublicUserOrContact = PublicContact | PublicUser

type Query {
  access(keycode: ID!): PublicPetitionAccess
  contact(id: GID!): Contact

  """
  The contacts of the user
  """
  contacts(
    exclude: [GID!]

    """
    Number of elements to take from the list.
    """
    limit: Int

    """
    Number of elements to skip from the list.
    """
    offset: Int

    """
    Optional text to search in the collection.
    """
    search: String

    """
    Sorting to use on the collection
    """
    sortBy: [QueryContacts_OrderBy!]
  ): ContactPagination!

  """
  Decodes the given Global ID into an entity in the database.
  """
  globalIdDecode(
    """
    Global ID to decode
    """
    id: ID!
  ): SupportMethodResponse!

  """
  Encodes the given ID into a Global ID.
  """
  globalIdEncode(
    """
    ID to encode
    """
    id: Int!
    type: EntityType!
  ): SupportMethodResponse!
  me: User!
  organization(id: GID!): Organization
  petition(id: GID!): PetitionBase

  """
  The petitions of the user
  """
  petitions(
    """
    Number of elements to take from the list.
    """
    limit: Int
    locale: PetitionLocale

    """
    Number of elements to skip from the list.
    """
    offset: Int

    """
    Optional text to search in the collection.
    """
    search: String

    """
    Sorting to use on the collection
    """
    sortBy: [QueryPetitions_OrderBy!]
    status: PetitionStatus
    type: PetitionBaseType
  ): PetitionBasePagination!

  """
  The publicly available templates
  """
  publicTemplates(
    """
    Number of elements to take from the list.
    """
    limit: Int
    locale: PetitionLocale

    """
    Number of elements to skip from the list.
    """
    offset: Int

    """
    Optional text to search in the collection.
    """
    search: String
  ): PetitionTemplatePagination!
}

"""
Order to use on Query.contacts
"""
enum QueryContacts_OrderBy {
  createdAt_ASC
  createdAt_DESC
  email_ASC
  email_DESC
  firstName_ASC
  firstName_DESC
  fullName_ASC
  fullName_DESC
  lastName_ASC
  lastName_DESC
}

"""
Order to use on Query.petitions
"""
enum QueryPetitions_OrderBy {
  createdAt_ASC
  createdAt_DESC
  name_ASC
  name_DESC
}

"""
The reminder settings of a petition
"""
type RemindersConfig {
  """
  The amount of days between reminders.
  """
  offset: Int!

  """
  The time at which the reminder should be sent.
  """
  time: String!

  """
  The timezone the time is referring to.
  """
  timezone: String!

  """
  Whether to send reminders only from monday to friday.
  """
  weekdaysOnly: Boolean!
}

"""
The reminders settings for the petition
"""
input RemindersConfigInput {
  """
  The amount of days between reminders.
  """
  offset: Int!

  """
  The time at which the reminder should be sent.
  """
  time: String!

  """
  The timezone the time is referring to.
  """
  timezone: String!

  """
  Whether to send reminders only from monday to friday.
  """
  weekdaysOnly: Boolean!
}

type ReminderSentEvent implements PetitionEvent {
  createdAt: DateTime!
  id: GID!
  reminder: PetitionReminder!
}

type ReplyCreatedEvent implements PetitionEvent {
  access: PetitionAccess!
  createdAt: DateTime!
  field: PetitionField
  id: GID!
  reply: PetitionFieldReply
}

type ReplyDeletedEvent implements PetitionEvent {
  access: PetitionAccess!
  createdAt: DateTime!
  field: PetitionField
  id: GID!
}

"""
Represents the result of an operation.
"""
enum Result {
  FAILURE
  SUCCESS
}

type SendPetitionResult {
  accesses: [PetitionAccess!]
  petition: Petition
  result: Result!
}

"""
Return type for all support methods
"""
type SupportMethodResponse {
  message: String
  result: Result!
}

interface Timestamps {
  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!
}

input UpdateContactInput {
  firstName: String
  lastName: String
}

input UpdatePetitionFieldInput {
  description: String
  multiple: Boolean
  optional: Boolean
  options: JSONObject
  title: String
}

input UpdatePetitionInput {
  deadline: DateTime
  description: String
  emailBody: JSON
  emailSubject: String
  locale: PetitionLocale
  name: String
  remindersConfig: RemindersConfigInput
}

input UpdateUserInput {
  firstName: String
  lastName: String
}

"""
The `Upload` scalar type represents a file upload.
"""
scalar Upload

"""
A user in the system.
"""
type User implements Timestamps {
  """
  Time when the resource was created.
  """
  createdAt: DateTime!

  """
  The email of the user.
  """
  email: String!

  """
  The first name of the user.
  """
  firstName: String

  """
  The full name of the user.
  """
  fullName: String

  """
  The ID of the user.
  """
  id: GID!

  """
  The last name of the user.
  """
  lastName: String

  """
  The onboarding status for the different views of the app.
  """
  onboardingStatus: JSONObject!
  organization: Organization!
  organizationRole: OrganizationRole!

  """
  Time when the resource was last updated.
  """
  updatedAt: DateTime!
}

union UserOrPetitionAccess = PetitionAccess | User

type UserPagination {
  """
  The requested slice of items.
  """
  items: [User!]!

  """
  The total count of items in the list.
  """
  totalCount: Int!
}

type UserPermissionAddedEvent implements PetitionEvent {
  createdAt: DateTime!
  id: GID!
  permissionType: PetitionUserPermissionType!
  permissionUser: User
  user: User
}

type UserPermissionEditedEvent implements PetitionEvent {
  createdAt: DateTime!
  id: GID!
  permissionType: PetitionUserPermissionType!
  permissionUser: User
  user: User
}

type UserPermissionRemovedEvent implements PetitionEvent {
  createdAt: DateTime!
  id: GID!
  permissionUser: User
  user: User
}
